---
title: "Next.jsのビルド時に外部APIから429が返る際の対処法"
emoji: "🔺"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [nextjs]
published: false
---

Next.js13以降ではServer Componentsが導入され、データfetchをクライアント側ではなくサーバー側で行うことが推奨されています。
そのためキャッシュできるデータは予めビルド時に取得してしまい、取得済みのデータをHTMLに埋め込んだ状態で配信するいわゆるSSGを行うことが多くなりました。
この際、外部APIからデータを取得する場合は、APIの仕様によっては429が返ってくることがあります。
同時に並列でリクエストを送ることができる数が制限されている場合、この429が返ってくることでビルドが失敗してしまいます。
その対処法をまとめます。

- 並列実行をやめる

ビルド先にもよりますが、多くの場合マルチコアで並列実行されているので、並列実行をやめることで解決します。

```js:next.config.js

```


- 429が返ってきたらリトライする